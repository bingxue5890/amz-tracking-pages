<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon TBA 查询</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .language-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .language-switch button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .language-switch button:hover {
            background: #0056b3;
        }

        .container {
            max-width: 800px;
            margin: 100px auto 0;
            padding: 0 20px;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            gap: 10px;
        }

        .logo img {
            width: 40px;
            height: 40px;
        }

        .logo h1 {
            font-size: 32px;
            color: #1a73e8;
            margin: 0;
        }

        .search-box {
            background: white;
            border-radius: 30px;
            padding: 6px;
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .search-box input {
            flex: 1;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            outline: none;
            border-radius: 24px;
        }

        .search-box button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 24px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .search-box button:hover {
            background: #f57c00;
        }

        #result {
            margin-top: 30px;
            padding: 20px;
        }

        .result-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .loading {
            display: none;
            margin: 20px auto;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .nav-link {
            color: #1a73e8;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: background-color 0.3s;
        }

        .nav-link:hover {
            background: rgba(26, 115, 232, 0.1);
        }

        .auth-buttons {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
        }

        .auth-buttons a {
            background: #007bff;
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .auth-buttons a:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="auth-buttons">
        <a href="/login">登录</a>
        <a href="/register">注册</a>
    </div>

    <div class="language-switch">
        <button onclick="switchLanguage('zh')">中文</button>
        <button onclick="switchLanguage('en')">English</button>
        <button onclick="switchLanguage('es')">Español</button>
        <button onclick="switchLanguage('it')">Italiano</button>
        <button onclick="switchLanguage('fr')">Français</button>
        <button onclick="switchLanguage('de')">Deutsch</button>
        <button onclick="switchLanguage('ja')">日本語</button>
        <button onclick="switchLanguage('ko')">한국어</button>
    </div>

    <div class="container">
        <div class="logo">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="#ff9800">
                <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
            </svg>
            <h1>Amazon TBA 查询</h1>
        </div>

        <div class="search-box">
            <input type="text" id="tba" placeholder="请输入 TBA 单号..." />
            <button onclick="query()">查询</button>
        </div>

        <div class="loading" id="loading"></div>
        <div id="result"></div>

        <div class="nav-links">
            <a href="/chat" class="nav-link">聊天室</a>
            <a href="/about" class="nav-link">关于我们</a>
            <a href="/help" class="nav-link">帮助中心</a>
        </div>
    </div>

    <script>
        async function query() {
            const tba = document.getElementById('tba').value.trim();
            if (!tba) {
                alert('请输入TBA单号');
                return;
            }

            // 显示加载动画
            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').innerHTML = '';

            try {
                const res = await fetch('/fetch_tracking', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ tba_number: tba })
                });
                const data = await res.json();

                // 隐藏加载动画
                document.getElementById('loading').style.display = 'none';

                if (data.success) {
                    if (data.url) {
                        const resultCard = document.createElement('div');
                        resultCard.className = 'result-card';
                        resultCard.style.display = 'block';
                        resultCard.innerHTML = `
                            <h3>查询成功！</h3>
                            <p>TBA单号: ${tba}</p>
                            <a href="${data.url}" target="_blank" style="
                                display: inline-block;
                                background: #1a73e8;
                                color: white;
                                text-decoration: none;
                                padding: 10px 20px;
                                border-radius: 20px;
                                margin-top: 10px;
                            ">查看详细轨迹</a>
                        `;
                        document.getElementById('result').appendChild(resultCard);
                    } else {
                        showError('未找到相关轨迹信息');
                    }
                } else {
                    showError(data.error || '查询失败');
                }
            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                showError('网络错误，请稍后重试');
            }
        }

        function showError(message) {
            const resultCard = document.createElement('div');
            resultCard.className = 'result-card';
            resultCard.style.display = 'block';
            resultCard.innerHTML = `
                <p style="color: #d32f2f;">${message}</p>
            `;
            document.getElementById('result').appendChild(resultCard);
        }

        // 监听回车键
        document.getElementById('tba').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                query();
            }
        });

        const translations = {
            zh: {
                title: 'Amazon TBA 查询',
                placeholder: '请输入 TBA 单号...',
                searchButton: '查询',
                login: '登录',
                register: '注册',
                chat: '聊天室',
                about: '关于我们',
                help: '帮助中心'
            },
            en: {
                title: 'Amazon TBA Tracking',
                placeholder: 'Enter TBA number...',
                searchButton: 'Search',
                login: 'Login',
                register: 'Register',
                chat: 'Chat Room',
                about: 'About Us',
                help: 'Help Center'
            }
            // 其他语言的翻译...
        };

        function switchLanguage(lang) {
            const t = translations[lang] || translations.zh;
            document.title = t.title;
            document.querySelector('h1').textContent = t.title;
            document.querySelector('#tba').placeholder = t.placeholder;
            document.querySelector('.search-box button').textContent = t.searchButton;
            document.querySelector('.auth-buttons a:first-child').textContent = t.login;
            document.querySelector('.auth-buttons a:last-child').textContent = t.register;
            document.querySelectorAll('.nav-link').forEach((link, index) => {
                if (index === 0) link.textContent = t.chat;
                if (index === 1) link.textContent = t.about;
                if (index === 2) link.textContent = t.help;
            });
        }
    </script>
</body>
</html> 